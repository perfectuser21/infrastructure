---
id: infrastructure-overview
version: 1.0.0
created: 2026-02-10
changelog:
  - 1.0.0: åˆå§‹ç‰ˆæœ¬ - Infrastructure ä»“åº“æ€»è§ˆ
---

# Perfect21 Infrastructure

**åŸºç¡€è®¾æ–½ç»Ÿä¸€ç®¡ç†ä»“åº“**

## ğŸ¯ å®šä½

ç®¡ç† Perfect21 ç”Ÿæ€ç³»ç»Ÿçš„æ‰€æœ‰åŸºç¡€è®¾æ–½ï¼ˆL0/L1/L2 å±‚ï¼‰ï¼š
- ğŸ–¥ï¸ **ç¡¬ä»¶å±‚ (L0)**: æœåŠ¡å™¨ã€NASã€è®¾å¤‡
- ğŸŒ **ç½‘ç»œå±‚ (L1)**: VPNã€åå‘ä»£ç†ã€åŸŸåè·¯ç”±
- ğŸ’¾ **å­˜å‚¨å±‚ (L2)**: æ•°æ®åº“ã€æ–‡ä»¶å­˜å‚¨

## ğŸ“¦ ä»“åº“ç»“æ„

```
infrastructure/
â”œâ”€â”€ docs/                            # ğŸ“š æ–‡æ¡£
â”‚   â”œâ”€â”€ servers/                     # æœåŠ¡å™¨æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ us-vps.md               # ç¾å›½ VPS (146.190.52.84)
â”‚   â”‚   â”œâ”€â”€ hk-vps.md               # é¦™æ¸¯ VPS (43.154.85.217)
â”‚   â”‚   â””â”€â”€ hk-dev-vps.md           # é¦™æ¸¯å¼€å‘ VPS (100.86.118.99)
â”‚   â”œâ”€â”€ nas/                         # NAS æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ setup.md                # NAS åˆå§‹é…ç½®
â”‚   â”‚   â”œâ”€â”€ tailscale.md            # Tailscale é…ç½®
â”‚   â”‚   â”œâ”€â”€ samba.md                # Samba æ–‡ä»¶å…±äº«
â”‚   â”‚   â””â”€â”€ troubleshooting.md      # æ•…éšœæ’æŸ¥
â”‚   â”œâ”€â”€ devices/                     # è®¾å¤‡æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ mac-mini.md             # Mac mini (è¥¿å®‰)
â”‚   â”‚   â””â”€â”€ node-pc.md              # Node PC (è¥¿å®‰)
â”‚   â”œâ”€â”€ network/                     # ç½‘ç»œæ¶æ„
â”‚   â”‚   â”œâ”€â”€ topology.md             # ç½‘ç»œæ‹“æ‰‘å›¾
â”‚   â”‚   â”œâ”€â”€ vpn.md                  # VPN é…ç½®æ€»è§ˆ
â”‚   â”‚   â””â”€â”€ ports.md                # ç«¯å£æ˜ å°„
â”‚   â””â”€â”€ database/                    # æ•°æ®åº“æ–‡æ¡£
â”‚       â”œâ”€â”€ postgresql.md           # PostgreSQL é…ç½®
â”‚       â””â”€â”€ timescaledb.md          # TimescaleDB é…ç½®
â”œâ”€â”€ config/                          # âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ tailscale/                  # Tailscale é…ç½®
â”‚   â”œâ”€â”€ xray/                       # X-Ray Reality VPN
â”‚   â”œâ”€â”€ cloudflare/                 # Cloudflare Tunnel
â”‚   â”œâ”€â”€ nginx/                      # Nginx åå‘ä»£ç†
â”‚   â”œâ”€â”€ postgresql/                 # PostgreSQL å®‰è£…é…ç½®
â”‚   â”œâ”€â”€ nas/                        # NAS é…ç½® (Samba/NFS)
â”‚   â””â”€â”€ timescaledb/                # TimescaleDB é…ç½®
â””â”€â”€ scripts/                         # ğŸ› ï¸ è‡ªåŠ¨åŒ–è„šæœ¬
    â”œâ”€â”€ backup/                     # å¤‡ä»½è„šæœ¬
    â”œâ”€â”€ monitoring/                 # ç›‘æ§è„šæœ¬
    â””â”€â”€ deployment/                 # éƒ¨ç½²è„šæœ¬
```

## ğŸ—ï¸ æ¶æ„åˆ†å±‚

```
L4: å·¥å…·å±‚ (Skills/Engine)           â† cecelia/engine, ~/.claude/skills/
    â†“
L3: æœåŠ¡å±‚ (Cecelia/ZenithJoy)       â† cecelia/core, zenithjoy/workspace
    â†“
L2: å­˜å‚¨å±‚ (PostgreSQL/NAS)          â† æ­¤ä»“åº“ (é…ç½®) + å„æœåŠ¡ (schema)
    â†“
L1: ç½‘ç»œå±‚ (VPN/Tailscale)           â† æ­¤ä»“åº“
    â†“
L0: ç¡¬ä»¶å±‚ (VPS/NAS/è®¾å¤‡)            â† æ­¤ä»“åº“
```

## ğŸ“ å½“å‰ç½‘ç»œæ‹“æ‰‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ· Mac (ä¸­å›½)                                             â”‚
â”‚  â”œâ”€â”€ WARP (Include æ¨¡å¼) â†’ åªç®¡ç¾å›½ VPS è¿æ¥                  â”‚
â”‚  â”œâ”€â”€ Clash (X-Ray) â†’ ç¿»å¢™æµé‡ï¼Œèµ° VPS å¹²å‡€å‡ºå£                â”‚
â”‚  â””â”€â”€ Tailscale â†’ å†…ç½‘ç©¿é€                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‡ºğŸ‡¸ ç¾å›½ VPS (ç ”å‘)    â”‚  â—„â”€Tailscaleâ”€â–º â”‚  ğŸ‡­ğŸ‡° é¦™æ¸¯ VPS (ç”Ÿäº§)    â”‚
â”‚  146.190.52.84        â”‚                 â”‚  43.154.85.217        â”‚
â”‚  Tailscale: 100.71.32.28               â”‚  Tailscale: 100.86.118.99
â”‚                       â”‚                 â”‚                       â”‚
â”‚  æœåŠ¡:                â”‚                 â”‚  æœåŠ¡:                â”‚
â”‚  - Claude Code (æœ‰å¤´) â”‚                 â”‚  - X-Ray VPN (:443)   â”‚
â”‚  - X-Ray VPN (:443)   â”‚                 â”‚  - è®¢é˜…æœåŠ¡å™¨ (:8080) â”‚
â”‚  - Cecelia Brain      â”‚                 â”‚  - PostgreSQL (:5432) â”‚
â”‚  - å‰ç«¯å¼€å‘ç¯å¢ƒ       â”‚                 â”‚  - ç”Ÿäº§å‰ç«¯           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ (Tailscale)
                          â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  ğŸ¢ è¥¿å®‰å…¬å¸            â”‚
                â”‚                       â”‚
                â”‚  è®¾å¤‡:                â”‚
                â”‚  - NAS (æ–‡ä»¶å­˜å‚¨)      â”‚
                â”‚  - Mac mini (å¼€å‘)    â”‚
                â”‚  - Node PC (è®¡ç®—)     â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”‘ æ ¸å¿ƒåŸåˆ™

### èŒè´£åˆ†ç¦»

| ç»„ä»¶ | Infrastructure ç®¡ç† | æœåŠ¡ä»“åº“ç®¡ç† |
|------|---------------------|--------------|
| **PostgreSQL** | âœ… å®‰è£…é…ç½® | âœ… Schema/Migrations |
| **NAS** | âœ… Samba/NFS é…ç½® | âœ… åº”ç”¨å±‚ä½¿ç”¨ |
| **Tailscale** | âœ… ç½‘ç»œé…ç½® | - |
| **VPN** | âœ… X-Ray é…ç½® | - |

### å•ä¸€äº‹å®æ¥æº (SSOT)

- âœ… ç½‘ç»œæ‹“æ‰‘ï¼š`docs/network/topology.md` (æ­¤ä»“åº“)
- âœ… ç«¯å£æ˜ å°„ï¼š`docs/network/ports.md` (æ­¤ä»“åº“)
- âœ… æœåŠ¡å™¨æ¸…å•ï¼š`docs/servers/` (æ­¤ä»“åº“)
- âœ… Database Schemaï¼šå„æœåŠ¡ä»“åº“çš„ migrations

## ğŸ“š å¿«é€Ÿå¼€å§‹

### æŸ¥çœ‹ç½‘ç»œæ‹“æ‰‘

```bash
cat docs/network/topology.md
```

### æŸ¥çœ‹ NAS é…ç½®

```bash
cat docs/nas/setup.md
```

### æŸ¥çœ‹æœåŠ¡å™¨åˆ—è¡¨

```bash
ls -la docs/servers/
```

## ğŸ”— ç›¸å…³ä»“åº“

| ä»“åº“ | èŒè´£ | ç«¯å£ |
|------|------|------|
| [cecelia/core](../cecelia/core) | Brain åç«¯ API | 5221 |
| [cecelia/workspace](../cecelia/workspace) | Cecelia å‰ç«¯ | 5211 |
| [cecelia/engine](../cecelia/engine) | å¼€å‘å·¥å…·é“¾ (Hooks/CI) | - |
| [zenithjoy/workspace](../zenithjoy/workspace) | ZenithJoy å‰ç«¯ | 5212 |
| [cecelia/workflows](../cecelia/workflows) | N8N å·¥ä½œæµ | - |

## ğŸ“ å˜æ›´å†å²

- 2026-02-10: åˆ›å»º Infrastructure ä»“åº“ï¼Œç»Ÿä¸€ç®¡ç†åŸºç¡€è®¾æ–½
